# =============================================================================
# RusingAcademy Ecosystem — Environment Variables
# Copy this file to .env and fill in your values.
# NEVER commit .env to version control.
# =============================================================================

# ── Application ──────────────────────────────────────────────────────────────
NODE_ENV=development                          # development | production | test
PORT=3000                                     # Express server port
VITE_API_URL=http://localhost:3000             # API URL (used by Vite client)
VITE_APP_URL=http://localhost:5173             # Frontend URL
CORS_ORIGIN=http://localhost:5173              # Allowed CORS origins (comma-separated for multiple)

# ── Database (TiDB / MySQL) ──────────────────────────────────────────────────
DATABASE_URL=mysql://user:password@host:4000/rusingacademy   # TiDB connection string
# DATABASE_URL=mysql://root:password@localhost:3306/rusingacademy  # Local MySQL alternative

# ── Authentication ───────────────────────────────────────────────────────────
JWT_SECRET=your-jwt-secret-min-64-characters-long-replace-this-with-a-real-secret
JWT_EXPIRES_IN=7d                             # Token expiry (e.g., 1h, 7d, 30d)
JWT_REFRESH_EXPIRES_IN=30d                    # Refresh token expiry

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:3000/api/auth/google/callback

# Microsoft OAuth
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_TENANT_ID=common                    # 'common' for multi-tenant
MICROSOFT_CALLBACK_URL=http://localhost:3000/api/auth/microsoft/callback

# Manus OAuth (custom)
MANUS_CLIENT_ID=your-manus-client-id
MANUS_CLIENT_SECRET=your-manus-client-secret

# ── Stripe (Payments) ───────────────────────────────────────────────────────
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
STRIPE_CONNECT_CLIENT_ID=ca_your-stripe-connect-client-id     # For coach payouts

# ── AWS S3 (File Storage) ───────────────────────────────────────────────────
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_REGION=ca-central-1                       # Canada (Central)
AWS_S3_BUCKET=rusingacademy-content           # Main content bucket
AWS_S3_BUCKET_PRIVATE=rusingacademy-private   # Private uploads bucket

# ── Bunny CDN ────────────────────────────────────────────────────────────────
BUNNY_CDN_URL=https://rusingacademy-cdn.b-cdn.net
BUNNY_CDN_API_KEY=your-bunny-cdn-api-key
BUNNY_CDN_STORAGE_ZONE=rusingacademy-cdn
BUNNY_STREAM_API_KEY=your-bunny-stream-api-key
BUNNY_STREAM_LIBRARY_ID=your-bunny-stream-library-id

# ── AI Services ──────────────────────────────────────────────────────────────
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_MODEL=gpt-4o                           # Model for AI features
MINIMAX_API_KEY=your-minimax-api-key           # MiniMax TTS
MINIMAX_GROUP_ID=your-minimax-group-id

# ── Email ────────────────────────────────────────────────────────────────────
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USER=your-email@rusingacademy.ca
SMTP_PASSWORD=your-smtp-password
EMAIL_FROM=noreply@rusingacademy.ca
EMAIL_FROM_NAME=RusingAcademy

# ── External Integrations ───────────────────────────────────────────────────
CALENDLY_API_KEY=your-calendly-api-key         # Coach scheduling
CALENDLY_WEBHOOK_SECRET=your-calendly-webhook-secret

# ── Rate Limiting ────────────────────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=900000                    # 15 minutes (in ms)
RATE_LIMIT_MAX_REQUESTS=100                    # Max requests per window (general)
RATE_LIMIT_AUTH_MAX=10                         # Max auth attempts per window
RATE_LIMIT_AI_MAX=30                           # Max AI requests per window

# ── Logging & Monitoring ────────────────────────────────────────────────────
LOG_LEVEL=debug                                # debug | info | warn | error
# SENTRY_DSN=https://your-sentry-dsn            # Optional: Sentry error tracking

# ── Feature Flags ────────────────────────────────────────────────────────────
ENABLE_AI_COMPANION=true                       # SLE AI Companion feature
ENABLE_TTS_AUDIO=true                          # MiniMax TTS for lessons
ENABLE_GAMIFICATION=true                       # XP, badges, leaderboards
ENABLE_COMMUNITY=false                         # Forum/messaging (in development)
