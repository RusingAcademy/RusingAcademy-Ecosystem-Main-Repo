/**
 * ============================================
 * RUSINGACADEMY ECOSYSTEM - MOBILE PREMIUM CSS
 * ============================================
 * Comprehensive mobile optimization layer
 * Inspired by MgCréa's premium mobile patterns
 * Adapted for EdTech/B2G/B2B ecosystem
 * 
 * Key Features:
 * - Dual font system (serif headings + sans-serif body)
 * - Generous whitespace & breathing room
 * - Touch-friendly 48px minimum targets
 * - 2-column mobile grids
 * - Smooth scrolling & app-like feel
 * - Zero horizontal overflow
 * - Bilingual-safe (French 20-30% longer text)
 * - WCAG AA accessible
 * ============================================ */

/* ==========================================================================
   SMOOTH SCROLLING & APP-LIKE BEHAVIOR
   ========================================================================== */
html {
  scroll-behavior: smooth;
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Prevent horizontal overflow globally */
html, body {
  overflow-x: hidden;
  max-width: 100vw;
}

/* Smooth momentum scrolling on iOS */
* {
  -webkit-overflow-scrolling: touch;
}

/* ==========================================================================
   DUAL FONT SYSTEM — Serif headings + Sans-serif body
   Inspired by MgCréa's elegant typography pairing
   ========================================================================== */

/* Section headings — Merriweather serif (already loaded via Google Fonts) */
.font-heading-serif,
h1.mobile-premium,
h2.mobile-premium {
  font-family: var(--font-display, 'Merriweather', Georgia, serif);
  font-weight: 700;
  letter-spacing: -0.01em;
  line-height: 1.2;
}

/* Body text — Inter sans-serif */
.font-body-sans,
p.mobile-premium,
.mobile-premium-body {
  font-family: var(--font-ui, 'Inter', -apple-system, BlinkMacSystemFont, sans-serif);
  font-weight: 400;
  line-height: 1.65;
}

/* ==========================================================================
   SECTION LABELS — Uppercase tracking-wide with accent color
   Inspired by MgCréa's "CRAFTSMANSHIP", "SELECTION", etc.
   ========================================================================== */
.section-label-premium {
  font-family: var(--font-ui, 'Inter', sans-serif);
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  color: var(--brand-cta, #C65A1E);
  margin-bottom: 0.75rem;
}

@media (min-width: 640px) {
  .section-label-premium {
    font-size: 0.8125rem;
  }
}

/* ==========================================================================
   GENEROUS WHITESPACE & BREATHING ROOM
   Mobile sections need more vertical padding
   ========================================================================== */

/* Section padding — generous on mobile, scales up */
.section-premium {
  padding-top: 3rem;
  padding-bottom: 3rem;
  padding-left: 1.25rem;
  padding-right: 1.25rem;
}

@media (min-width: 640px) {
  .section-premium {
    padding-top: 4rem;
    padding-bottom: 4rem;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
}

@media (min-width: 768px) {
  .section-premium {
    padding-top: 5rem;
    padding-bottom: 5rem;
    padding-left: 2rem;
    padding-right: 2rem;
  }
}

@media (min-width: 1024px) {
  .section-premium {
    padding-top: 6rem;
    padding-bottom: 6rem;
  }
}

/* ==========================================================================
   TOUCH-FRIENDLY BUTTONS — Minimum 48px height
   ========================================================================== */
@media (max-width: 767px) {
  /* All buttons and interactive elements */
  .btn-touch,
  button:not(.icon-btn-sm),
  [role="button"]:not(.icon-btn-sm),
  a.btn,
  .mobile-premium button {
    min-height: 48px;
    min-width: 48px;
    padding-left: 1.25rem;
    padding-right: 1.25rem;
  }

  /* Links in navigation */
  nav a,
  .nav-link {
    min-height: 48px;
    display: inline-flex;
    align-items: center;
  }
}

/* ==========================================================================
   2-COLUMN MOBILE GRIDS
   Inspired by MgCréa's product/gallery grids
   ========================================================================== */

/* Default: 1 column on very small, 2 columns on 375px+ */
.grid-mobile-2col {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0.75rem;
}

@media (min-width: 375px) {
  .grid-mobile-2col {
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }
}

@media (min-width: 768px) {
  .grid-mobile-2col {
    gap: 1.25rem;
  }
}

@media (min-width: 1024px) {
  .grid-mobile-2col {
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }
}

@media (min-width: 1280px) {
  .grid-mobile-2col {
    grid-template-columns: repeat(4, 1fr);
  }
}

/* Stats/trust: Always 2x2 on mobile, 4-col on desktop */
.grid-stats-2x2 {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
}

@media (min-width: 768px) {
  .grid-stats-2x2 {
    grid-template-columns: repeat(4, 1fr);
    gap: 1.5rem;
  }
}

/* ==========================================================================
   CARD ENHANCEMENTS FOR MOBILE
   ========================================================================== */

/* Premium card with rounded corners and shadow */
.card-premium-mobile {
  border-radius: 1rem;
  overflow: hidden;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

@media (max-width: 767px) {
  .card-premium-mobile {
    border-radius: 0.75rem;
  }
}

.card-premium-mobile:active {
  transform: scale(0.98);
}

/* Glass card for dark backgrounds */
.card-glass-mobile {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border-radius: 1rem;
  padding: 1.25rem;
}

@media (min-width: 640px) {
  .card-glass-mobile {
    padding: 1.5rem;
  }
}

/* ==========================================================================
   MOBILE-OPTIMIZED PRICING CARDS
   Stack properly, no horizontal overflow
   ========================================================================== */
@media (max-width: 767px) {
  /* Force pricing cards to stack vertically on mobile */
  .pricing-grid-mobile {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .pricing-grid-mobile > * {
    width: 100%;
    max-width: 100%;
  }

  /* Remove the upward translate on featured card on mobile */
  .pricing-grid-mobile > .pricing-featured {
    transform: none !important;
  }
}

/* ==========================================================================
   TESTIMONIAL CARDS — Premium mobile layout
   ========================================================================== */
.testimonial-card-premium {
  background: var(--surface, #FFFFFF);
  border-radius: 1rem;
  padding: 1.5rem;
  position: relative;
  overflow: hidden;
}

.testimonial-card-premium::before {
  content: '\201C';
  position: absolute;
  top: 0.75rem;
  right: 1rem;
  font-size: 4rem;
  font-family: var(--font-display, 'Merriweather', serif);
  color: var(--brand-cta, #C65A1E);
  opacity: 0.1;
  line-height: 1;
  pointer-events: none;
}

.testimonial-stars {
  display: flex;
  gap: 0.125rem;
  margin-bottom: 0.75rem;
}

.testimonial-stars .star {
  width: 1.25rem;
  height: 1.25rem;
  color: #F59E0B;
  fill: #F59E0B;
}

.testimonial-verified-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  font-size: 0.75rem;
  font-weight: 600;
  color: #10B981;
  background: rgba(16, 185, 129, 0.1);
  padding: 0.125rem 0.5rem;
  border-radius: 9999px;
  border: 1px solid rgba(16, 185, 129, 0.2);
}

/* ==========================================================================
   MOBILE NAVIGATION & HEADER FIXES
   ========================================================================== */
@media (max-width: 767px) {
  /* Ensure header doesn't cause horizontal overflow */
  header {
    max-width: 100vw;
    overflow-x: hidden;
  }

  /* Mobile menu full-width */
  .mobile-menu-panel {
    width: 100vw;
    max-width: 100vw;
  }
}

/* ==========================================================================
   MOBILE-SAFE IMAGES & MEDIA
   ========================================================================== */
img,
video,
iframe,
embed,
object {
  max-width: 100%;
  height: auto;
}

/* Prevent images from breaking layout */
.img-safe {
  max-width: 100%;
  height: auto;
  display: block;
}

/* ==========================================================================
   MOBILE FORM IMPROVEMENTS
   ========================================================================== */
@media (max-width: 767px) {
  /* Larger input fields on mobile */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="search"],
  input[type="tel"],
  input[type="url"],
  input[type="number"],
  textarea,
  select {
    min-height: 48px;
    font-size: 16px; /* Prevents iOS zoom on focus */
    padding: 0.75rem 1rem;
  }
}

/* ==========================================================================
   BILINGUAL-SAFE TEXT HANDLING
   French text is 20-30% longer — prevent overflow
   ========================================================================== */
.bilingual-safe {
  overflow-wrap: break-word;
  word-wrap: break-word;
  hyphens: auto;
  -webkit-hyphens: auto;
}

/* For buttons and badges that might overflow with French text */
.bilingual-safe-inline {
  white-space: normal;
  word-break: break-word;
  text-align: center;
  min-width: 0;
}

/* ==========================================================================
   MOBILE-OPTIMIZED SECTION TRANSITIONS
   Wave divider spacing
   ========================================================================== */
.wave-divider-wrapper {
  margin-top: -1px;
  margin-bottom: -1px;
  line-height: 0;
  overflow: hidden;
}

/* ==========================================================================
   BACK-TO-TOP BUTTON POSITIONING
   ========================================================================== */
.back-to-top-btn {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  z-index: 40;
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--brand-foundation, #0F3D3E);
  color: white;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
  cursor: pointer;
  border: none;
}

.back-to-top-btn:hover {
  background: var(--brand-foundation-2, #145A5B);
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
}

/* ==========================================================================
   MOBILE-SPECIFIC OVERRIDES FOR EXISTING COMPONENTS
   Applied at 375px viewport width
   ========================================================================== */
@media (max-width: 767px) {
  /* Reduce section padding on very small screens */
  section {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }

  /* Container padding override */
  .container {
    padding-left: 1rem;
    padding-right: 1rem;
  }

  /* Heading sizes for mobile */
  h1 {
    font-size: clamp(1.75rem, 5vw, 2.5rem);
    line-height: 1.15;
  }

  h2 {
    font-size: clamp(1.5rem, 4vw, 2rem);
    line-height: 1.2;
  }

  h3 {
    font-size: clamp(1.125rem, 3vw, 1.5rem);
    line-height: 1.25;
  }

  /* Stack flex items vertically on mobile */
  .flex-col-mobile {
    flex-direction: column;
  }

  /* Full-width buttons on mobile */
  .btn-full-mobile {
    width: 100%;
    justify-content: center;
  }

  /* Reduce card padding on mobile */
  .glass-card {
    padding: 1.25rem;
  }

  /* Fix grid gaps on mobile */
  .gap-8 {
    gap: 1rem;
  }

  .gap-6 {
    gap: 0.75rem;
  }
}

/* ==========================================================================
   TABLET OPTIMIZATIONS (768px)
   ========================================================================== */
@media (min-width: 768px) and (max-width: 1023px) {
  /* Ensure 2-column grids look good on tablet */
  .grid.md\:grid-cols-3 {
    gap: 1.25rem;
  }

  /* Tablet-specific card sizing */
  .card-premium-mobile {
    border-radius: 1.25rem;
  }
}

/* ==========================================================================
   DESKTOP ENHANCEMENTS (1024px+)
   ========================================================================== */
@media (min-width: 1024px) {
  /* Restore larger gaps */
  .card-premium-mobile {
    border-radius: 1.5rem;
  }
}

/* ==========================================================================
   LARGE DESKTOP (1440px+)
   ========================================================================== */
@media (min-width: 1440px) {
  .container {
    max-width: 1320px;
  }
}

/* ==========================================================================
   WCAG AA ACCESSIBILITY ENHANCEMENTS
   ========================================================================== */

/* Focus visible styles for keyboard navigation */
:focus-visible {
  outline: 2px solid var(--brand-cta, #C65A1E);
  outline-offset: 2px;
  border-radius: 4px;
}

/* Skip to content link */
.skip-to-content {
  position: absolute;
  top: -100%;
  left: 50%;
  transform: translateX(-50%);
  z-index: 9999;
  background: var(--brand-foundation, #0F3D3E);
  color: white;
  padding: 0.75rem 1.5rem;
  border-radius: 0 0 0.5rem 0.5rem;
  font-weight: 600;
  transition: top 0.2s ease;
}

.skip-to-content:focus {
  top: 0;
}

/* Ensure sufficient color contrast */
.text-contrast-safe {
  color: var(--text, #1A1A1A);
}

.text-contrast-safe-inverse {
  color: var(--text-inverse, #FFFFFF);
}

/* ==========================================================================
   SAFE AREA INSETS (for notched devices)
   ========================================================================== */
@supports (padding: env(safe-area-inset-bottom)) {
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }
}

/* ==========================================================================
   PRINT SAFETY — Don't print mobile-only elements
   ========================================================================== */
@media print {
  .back-to-top-btn,
  .wave-divider-wrapper,
  .mobile-only {
    display: none !important;
  }
}
